apiVersion: v1
kind: ConfigMap
metadata:
  name: configmap
  namespace: {{ .Release.Namespace }}
data:
  redis-service: redis-service
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: mongo-init-config
  namespace: {{ .Release.Namespace }}
data:
  init-mongo.js: |
    rs.initiate();

    // Create a collection and insert some documents
    db.myCollection.insertMany([
      { name: "Alice", age: 30 },
      { name: "Bob", age: 25 },
      { name: "Carol", age: 35 }
    ]);

    print("Database initialized with test data.");
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: mongo-config
  namespace: {{ .Release.Namespace }}
data:
  mongod.conf: |
    storage:
      dbPath: /data/db
    net:
      bindIp: 0.0.0.0
      port: 27017
    replication:
      replSetName: rs0